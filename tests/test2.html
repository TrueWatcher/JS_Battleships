<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Testing Harvester Class</title>
  <link rel="stylesheet" type="text/css" href="../battleships.css" media="all" />
</head>
<body>
<table id="general">
  <tr>
    <td>Your ships</td>
    <td>Enemy ships</td>
  </tr>
  <tr>
    <td id="primary"></td>
    <td id="tracking"></td>
  </tr>
  <tr>
    <td id="prPanel"></td>
    <td id="trPanel"></td>
  </tr>
  <tr>
    <td id="playerStat"></td>
    <td id="enemyStat"></td>
  </tr>  
</table>

<script>
  const DIM=10;
</script>
<script src="testUtils.js"></script>
<script src="../arrayUtils.js"></script>
<script src="../View.js"></script>
<script src="../Basin.js"></script>
<script src="../Model.js"></script>
<!--<script src="../Harvester.js"></script>-->
<script src="../controller.js"></script>
</body>

<script>
"use strict";
try{
  var v=new View();
  var b=new Basin();
  //var m=new Model();

  print(">page");
  //print(">console");
  
  println("\nstrikeResponce+Fleet+Basin+Stat\n");
  
  var r,rr,rrr;
  var f=new Fleet();
  var testShip1=[ [1,2],[1,3],[1,4] ];
  f._ships.push(testShip1);
  var testShip2=[ [3,0],[3,1],[3,2],[3,3] ];
  f._ships.push(testShip2);
  b.markShip(testShip1);
  v.pb.fromBasin(b);  
  var s=new Stat();
  var h=f.makeHistogram();
  assertEqualsVect([0,0,0,1,1,0,0,0,0,0,0],h,"Wromg histogram","histogram")
  s.setShips( h );
  r=strikeResponce(4,4,f,b,s);
  assertEqualsPrim("m",r,"Wrong responce on miss","miss");
  r=strikeResponce(4,4,f,b,s);
  assertEqualsPrim("n",r,"Wrong responce on over-miss","over-miss");
  r=strikeResponce(1,2,f,b,s);  
  assertEqualsPrim("h",r,"Wrong responce on hit","hit");
  r=strikeResponce(1,3,f,b,s);
  assertEqualsPrim("h",r,"Wrong responce on 2nd hit","2nd hit");  
  r=strikeResponce(1,3,f,b,s);
  assertEqualsPrim("n",r,"Wrong responce on over-hit","over-hit");  
  r=strikeResponce(1,4,f,b,s);
  assertEqualsPrim("w",r,"Wrong responce on killing hit","killing hit");
  r=strikeResponce(1,4,f,b,s);  
  assertEqualsPrim("n",r,"Wrong responce on over-kill","over-kill");
  r=strikeResponce(1,5,f,b,s);
  assertEqualsPrim("n",r,"Wrong responce on clearance","clearance"); 
  for (var j=0;j<testShip2.length-1;j++) { r=strikeResponce(testShip2[j][0],testShip2[j][1],f,b,s); }
  assertEqualsPrim("h",r,"Wrong responce on hit","hit");
  r=strikeResponce(testShip2[j][0],testShip2[j][1],f,b,s);
  assertEqualsPrim("f",r,"Wrong responce on finishing hit","finishing hit");
  v.pb.fromBasin(b);
  
    
//b.clear();
  
}
catch(err) { printErr(err); }
</script>

</html>
